<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="robots" content="noindex" />
		<title>hop - choose destination</title>
		<link href="/index.css" rel="stylesheet" />
		<link rel="icon" type="image/x-icon" href="/icon.png" />
	</head>

	<body class="min-h-screen bg-white dark:bg-gray-900 transition-colors duration-300">
		<div class="flex items-center justify-center min-h-screen px-4">
			<div class="w-full max-w-2xl">
				<div class="text-center mb-12">
					<p class="text-gray-600 dark:text-gray-400 text-lg">where to search?</p>
				</div>
				
				<form action="/search" method="get" class="relative">
					<div class="relative flex items-center">
						<input
							type="text"
							name="prefix"
							placeholder="Type a prefix or leave blank for Google"
							class="w-full px-6 py-4 text-lg bg-white dark:bg-gray-800 border-2 border-gray-200 dark:border-gray-700 rounded-2xl shadow-sm focus:border-blue-500 dark:focus:border-blue-400 focus:outline-none focus:ring-4 focus:ring-blue-500/10 transition-all duration-200 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400"
							id="prefix"
							autocomplete="off"
						/>
						<input type="hidden" name="original_query" id="original_query" />
						<button
							type="submit"
							class="absolute right-2 p-3 bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 text-white rounded-xl transition-colors duration-200 focus:outline-none focus:ring-4 focus:ring-blue-500/20 text-lg"
							aria-label="Search"
						>
							üêá
						</button>
					</div>
				</form>

				<div class="mt-8">
					<div class="bg-gray-50 dark:bg-gray-800 rounded-xl p-4 text-center">
						<p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Your query:</p>
						<code class="text-lg text-gray-900 dark:text-gray-100 bg-white dark:bg-gray-700 px-3 py-1 rounded" id="query-display"></code>
					</div>
				</div>
			</div>
		</div>

		<script>
			// Get query from URL parameters
			const urlParams = new URLSearchParams(window.location.search);
			const originalQuery = urlParams.get('q') || '';
			
			// Display the query
			document.getElementById('query-display').textContent = originalQuery;
			document.getElementById('original_query').value = originalQuery;
			
			// Focus on prefix input
			document.getElementById('prefix').focus();
			
			// Handle form submission
			document.querySelector('form').addEventListener('submit', function(e) {
				const prefix = document.getElementById('prefix').value.trim();
				const originalQuery = document.getElementById('original_query').value;
				
				// Construct the final query
				let finalQuery;
				if (prefix) {
					finalQuery = prefix + ' ' + originalQuery;
				} else {
					// If no prefix, default to Google search
					finalQuery = 'g ' + originalQuery;
				}
				
				// Update the form to search with the combined query
				const form = e.target;
				const queryInput = document.createElement('input');
				queryInput.type = 'hidden';
				queryInput.name = 'q';
				queryInput.value = finalQuery;
				form.appendChild(queryInput);
				
				// Remove the prefix and original_query inputs
				form.removeChild(document.getElementById('prefix'));
				form.removeChild(document.getElementById('original_query'));
			});
		</script>
	</body>
</html>